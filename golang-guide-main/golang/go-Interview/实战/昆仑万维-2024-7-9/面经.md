# 一面

1. 面试官介绍公司的情况
2. 自我介绍
3. 项目经验考察
   1.  大概介绍下ark方舟中台系统
      1. 数据抓取是一个什么样的流程？
      2. 数据的量级
      3. 有没有数据清洗和报表的一个流程，去重怎么做的？单纯的同一时间去重还是有什么策略？
   2. 介绍一下游戏项目
      1. 数据库是怎么建的
      2. 有没有考虑过热key的问题，所有用户的购买和校验都要走这一个key，比如说他的更新和修改会非常的频繁，有没有考虑过？
      3. redis热key怎么优化？
      4. bitmap不适合高频修改
      5. 讲解一下支付的流程
4. 技术深度和广度考察
   1. Golang
      1. GMP模型
      2. 协程间的通信一般有哪些办法？
      3.  Goroutine 之间的通信 ，用channel 和 加锁 (sync.Mutex)   的方式有什么区别呢？
      4. 基于通信的共享内存 和 基于共享内存的通信，有什么本质上的区别？ 
      5. 闭包的参数传递如何避免内存逃逸的问题
      6. Golang的异常处理机制
      7. runtime error golang的 recover是接不住的， 哪些运行的时候错误，在panic的时候，recover 接不住 
   2. redis
      1. zset的使用场景
      2. 分数相同的情况下，排序方式
      3. 希望同一个排行榜，先达到分数的人排在前面，后达到分数的人排在后面，跟时间有关系，跟成员没关系。怎么做
      4. 分数和时间戳怎么放呢？
         1. **分数 + 时间戳**：将分数和时间戳组合成一个新的值作为排序的依据。这里，分数可以保持不变，而时间戳则用于在分数相同的情况下区分元素的顺序。由于时间戳是一个很大的整数，直接将其与分数相加可能会导致数值溢出或失去精度，因此我们需要将时间戳转换为一个可以与分数相加且不会溢出的小数值。
         2. 一种常见的做法是将时间戳除以一个足够大的数（比如1e13，即10的13次方，这取决于你希望保留的时间精度和分数范围），得到一个可以作为小数部分的值，然后将其与分数相加。例如，如果分数是整数，时间戳是毫秒级的时间戳，那么可以将时间戳除以1e13，得到一个大约0到1之间的小数，然后将其加到分数上。
      5. 支持range操作，保证范围查询；保证非常快捷方便的去获取分数，尽可能的不需要太多的对时间戳的转换；考虑更新**ZINCRBY，**这种场景的话如果传时间戳了，必然需要更新时间戳，因为时间戳是天然不支持ZINCRBY的；那么这种情况下如何保证高并发问题。如果要做更新而不是**INCR**的话那必然需要get操作，get操作的话需要加锁的。从这三个方面考虑这种怎么做，怎么放，怎么查。尽可能保证高并发情况下的稳定性。
      6. 签到任务，前面100个签到天数一样，只是签到时间不一样，这该怎么做？
      7. hashmap的一些使用场景，什么情况下用hashmap，什么情况下直接用string去存储一个序列化后的字符串
   3. mysql
      1. 假设现在有一个慢查询，从哪些方面去考虑说为什么会出现慢查询，然后怎么去优化呢？
      2. 假设有一张表有a，b，c三个字段，现在有3条sql，分别对a b，a 和 b c这三种情况去做一个查询，这种情况下怎么建索引比较合适
      - **索引1 (a, b)**：
         - 当查询只涉及a时，例如 SELECT * FROM my_table WHERE a = ?，可以使用索引的前缀部分a。
         - 当查询涉及a和b时，例如 SELECT * FROM my_table WHERE a = ? AND b = ?，完整的索引 (a, b) 能够完全覆盖查询条件。
      - **索引2 (b, c)**：
         - 当查询涉及b和c时，例如 SELECT * FROM my_table WHERE b = ? AND c = ?，完整的索引 (b, c) 能够完全覆盖查询条件。
   4. 算法背包问题
      1. 假设有一个抽奖功能，假设现在有10个礼物价值1到10，需要随机的从中挑选一些礼物传给用户。首先抽奖的时候，随机一个礼物价值（假设也在1到10之间），假如抽到10，需要给用户返回10价值的礼物（可能是1个10礼物，或者3和7礼物，或者4和6礼物，或2+3+5的礼物）。礼物不能重复，两个变量：礼物的价值，礼物的数量（可能在1到3之间波动），这两个值都是随机生成的。写一个算法怎么确定给用户返回的礼物数量？并且尽可能的把10个礼物平均随机的发出去，而不是只发某一个价值高的礼物。怎么设计
# 二面

1.  自我介绍
2. 项目
   1. 详细的说一下你做的最多的这个项目
   2. 做的游戏上线了吗，什么类型的，怎么玩的，游戏做的时候总共几个人，多少开发
   3. redis用了哪些数据结构
   4. 讲了一下bitmap
   5. 有没有接手过大一点数据处理或者数据库存储，表的设计
   6. 之前公司是靠什么项目盈利的
   7. mysql为主还是MongoDB
3. mysql
   1. 假设要设计一个用户表，预计可能有5个亿用户，如何设计这个用户表；
   2. 怎么分库分表比较好？用户怎么去分到哪一张表去？
   3. 主从同步，主服务器和从服务器怎样沟通确认才能保证从库既实时性好又同步了所有要同步的数据，怎么做的
4. redis
   1.  生成以小时为维度的前100首听歌歌曲榜单，怎么设计
   2. 听歌的业务和榜单为主的业务怎么互相通信？
   3. 假如同时听歌的人是非常多的，都存在一个zset会不会有问题，该怎么办？
   4. 有用过redis 的分布式锁吗？具体的业务场景
5. 反问
6. 领导介绍了一下他们的StarMaker项目，挺牛的一款产品
7. 紧接着HRBP面，聊完一周给结果
